 <div class="form">
    <form class="search-form" [formGroup]="formGroup" (validSubmit)="getPatientHistory()">
      <div class="form-group" [customErrorMessages]="customErrorMessages">
        <!--<label for="name">PESEL</label>-->
        <!--<input type="text" formControlName="name" class="form-control" placeholder="Pesel"/>-->

        <label class="control-label">Pacjent</label>
        <ng-select [items]="patientsArray"
                   bindLabel="pesel.pesel"
                   bindValue="pesel.pesel"
                   placeholder="Pacjent"
                   [(ngModel)]="selectedPatient"
                   formControlName="name">
        </ng-select>

        <button type="click" class="btn btn-primary">Wyświetl historię</button>
        <div class="t-Region-headerItems--button">
          <button type="button"
                  class="btn btn-primary"
                  data-toggle="modal"
                  data-target="#createHistoryModal">
            <fa name="plus"></fa> Dodaj
          </button>
        </div>
      </div>
    </form>

    <div class="report-container">
      <div *ngIf="history">
        <div class="t-Region">
          <div class="t-Region-header">
            <div class="t-Region-headerItems--title">
              Historia chorób
            </div>

          </div>
          <div class=t-Region-body>
            <div *ngIf="history.length == 0" class="no-data-found">
          <span>
         Nie znaleziono żadnej choroby.
          </span>
            </div>
            <div *ngIf="history.length > 0" class="report-container-inner">
              <div class="table-responsive">
                <table id="bookTable" class="table table-hover">
                  <thead>
                  <tr>
                    <th scope="col">Nazwa choroby</th>
                    <th scope="col">Diagnoza</th>
                    <th scope="col">Data Diagnozy</th>
                    <th scope="col">Zażywany lek</th>
                    <th scope="col">Dawkowanie leku</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr *ngFor="let history of history" >
                    <td>{{history.diseaseName}}</td>
                    <td>{{history.diagnosis}}</td>
                    <td>{{history.diagnosisDate}}</td>
                    <td>{{history.medicineName}}</td>
                    <td>{{history.medicineDosage}}</td>
                  </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

 <div class="modal fade" id="createHistoryModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
   <div class="modal-dialog modal-dialog-centered" role="document">
     <div class="modal-content">
       <div class="modal-header">
         <h5 class="modal-title" id="exampleModalLongTitle">Dodaj wpis do historii</h5>
         <button type="button" sclass="close" data-dismiss="modal" aria-label="Close">
           <span aria-hidden="true">&times;</span>
         </button>
       </div>
       <div class="modal-body">
         <div class="row">
           <div class="col-md-12">
             <form [formGroup]="formGroupModal" (validSubmit)="createHistory()" >
               <!--<div class="form-group" [customErrorMessages]="customErrorMessages">-->
                 <!--<label class="control-label">Pacjent</label>-->
                 <!--<input type="text" class="form-control" formControlName="patientId">-->
               <!--</div>-->


               <div class="form-group" [customErrorMessages]="customErrorMessages">
                 <label class="control-label">Pacjent</label>
                 <ng-select [items]="patientsArray"
                            bindLabel="pesel.pesel"
                            bindValue="id"
                            placeholder="Pacjent"
                            [(ngModel)]="selectedPatient"
                            formControlName="patientId">
                 </ng-select>
               </div>


               <div class="form-group" [customErrorMessages]="customErrorMessages">
                 <label class="control-label">Choroba</label>
                 <ng-select [items]="diseasesArray"
                            bindLabel="name"
                            bindValue="name"
                            placeholder="Wybierz chorobę"
                            [(ngModel)]="selectedDisease"
                            formControlName="diseaseName">
                 </ng-select>
               </div>
               <div class="form-group" [customErrorMessages]="customErrorMessages">
                 <label class="control-label">Diagnoza</label>
                 <input type="text" class="form-control" formControlName="diagnosis">
               </div>
               <div class="form-group" [customErrorMessages]="customErrorMessages">
                 <label class="control-label">Data diagnozy</label>
                 <div class="input-group">
                   <input class="form-control" placeholder="yyyy-mm-dd"
                          name="loanDateDP" formControlName="diagnosisDateStr" ngbDatepicker #diagnosisDateStr="ngbDatepicker">
                   <div class="input-group-append">
                     <button class="btn btn-outline-secondary calendar" (click)="diagnosisDateStr.toggle()" type="button"><fa name="calendar"></fa></button>
                   </div>
                 </div>
               </div>
               <div class="form-group" [customErrorMessages]="customErrorMessages">
                 <label class="control-label">Lek</label>
                 <ng-select [items]="medicinesArray"
                            bindLabel="name"
                            bindValue="name"
                            placeholder="Wybierz lek"
                            [(ngModel)]="selectedMedicine"
                            formControlName="medicineName">
                 </ng-select>
               </div>
               <div class="form-group" [customErrorMessages]="customErrorMessages">
                 <label class="control-label">Dawkowanie</label>
                 <input type="text" class="form-control" formControlName="medicineDiseaseDosage">
               </div>
               <div class="modal-footer">
                 <button type="button" class="btn btn-secondary left" data-dismiss="modal">Zamknij</button>
                 <button type="submit" class="btn btn-primary right" >
                   <fa name="save"></fa> Zapisz
                 </button>
               </div>
             </form>
           </div>
         </div>
       </div>
     </div>
   </div>
 </div>



